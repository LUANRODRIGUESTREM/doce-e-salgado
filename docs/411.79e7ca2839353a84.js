"use strict";(self.webpackChunkdoce_e_salgado=self.webpackChunkdoce_e_salgado||[]).push([[411],{411:(C,m,l)=>{l.r(m),l.d(m,{GameModule:()=>P});var p=l(895),c=l(322);const u=[0,200];var t=l(256);const v=["game"];function w(n,a){if(1&n){const e=t.EpF();t.TgZ(0,"div",9)(1,"div",10)(2,"div")(3,"h1"),t._uU(4,"DOCE E SALGADO"),t.qZA()(),t.TgZ(5,"div"),t._uU(6,"engrenagem"),t.qZA(),t.TgZ(7,"div")(8,"div",11),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.playPause())}),t._uU(9,"play"),t.qZA()(),t.TgZ(10,"div"),t._uU(11," ilustrac\xe7oes "),t.qZA()()()}}const _=[{path:"",component:(()=>{class n{constructor(){this.sprites=new Image,this.player1={name:"",player:1,type:"doce",direction:{x:"right",y:"down"},running:!1,jumping:!1,spriteNumber:0,position:{x:0,y:0},positionJumpY:0,lastKeyPress:"",life:100,extraLife:1},this.player2={name:"",player:2,type:"salgado",direction:{x:"left",y:"down"},running:!1,jumping:!1,spriteNumber:0,position:{x:0,y:0},positionJumpY:0,lastKeyPress:"",life:100,extraLife:1},this.play=!1,this.onKeyDownSpace=this.playPause,this.onKeyDown=e=>{let i=e.key.toLowerCase();this.play&&this.getDirection(i)},this.onKeyUp=e=>{let i=e.key.toLowerCase();this.play&&this.stopMovement(i),console.log("keyup",i)},this.onLoad=()=>{this.gravity(),this.running(),this.jumping(),this.draw()},this.game={},this.movementKeysPlayer1={a:"left",d:"right",w:"up"},this.movementKeysPlayer2={arrowleft:"left",arrowright:"right",arrowup:"up"},this.teste=0}ngOnInit(){this.sprites.src="/assets/img/SPRITES.png",this.context=this.game.nativeElement.getContext("2d");let e=this.game.nativeElement.width-32.5,i=this.game.nativeElement.height-55;this.player1.position={x:Math.floor(Math.random()*e),y:Math.floor(Math.random()*i)},this.player2.position={x:Math.floor(Math.random()*e),y:Math.floor(Math.random()*i)}}loop(){requestAnimationFrame(this.loop)}playPause(){this.play=!this.play,this.play?this.positionsInterval=setInterval(()=>{this.gravity(),this.running(),this.jumping(),this.draw()},16.666666666666668):clearInterval(this.positionsInterval)}getDirection(e){let o;e in this.movementKeysPlayer1?(o=this.movementKeysPlayer1[e],this.setDirection(this.player1,o)):e in this.movementKeysPlayer2&&(o=this.movementKeysPlayer2[e],this.setDirection(this.player2,o))}setDirection(e,i){"up"==i?e.jumping||(e.direction.y=i,e.positionJumpY=e.position.y,e.jumping=!0):e.direction.x=i,e.running=!0}stopMovement(e){e in this.movementKeysPlayer1?(this.player1.running=!1,this.player1.jumping=!1):e in this.movementKeysPlayer2&&(this.player2.running=!1,this.player2.jumping=!1)}gravity(){this.player1.position.y<this.game.nativeElement.height-55&&(this.player1.position.y+=5),this.player2.position.y<this.game.nativeElement.height-55&&(this.player2.position.y+=5)}running(){this.setPositionX(this.player1),this.setPositionX(this.player2)}jumping(){this.setPositionY(this.player1),this.setPositionY(this.player2)}setPositionX(e){if(e.running||e.jumping){let i=e.position.x;"right"==e.direction.x?i+=5:i-=5,0<=i&&i<=this.game.nativeElement.width-32.5&&(e.position.x=i,e.spriteNumber=this.game.nativeElement.width/32.5%6)}}setPositionY(e){e.jumping&&("up"==e.direction.y&&(e.position.y-=10),e.position.y<=e.positionJumpY-55&&(e.direction.y="down"),e.position.y>=e.positionJumpY&&(e.jumping=!1))}draw(){this.context.clearRect(0,0,this.game.nativeElement.width,this.game.nativeElement.height),this.drawPlayer(this.player1),this.drawPlayer(this.player2)}drawPlayer(e){this.context.drawImage(this.sprites,5+u[0],8,200,331,e.position.x,e.position.y,32.5,55)}}return n.\u0275fac=function(e){return new(e||n)},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-game"]],viewQuery:function(e,i){if(1&e&&t.Gf(v,7),2&e){let o;t.iGM(o=t.CRH())&&(i.game=o.first)}},hostBindings:function(e,i){1&e&&t.NdJ("keydown.space",function(r){return i.onKeyDownSpace(r)},!1,t.pYS)("keydown",function(r){return i.onKeyDown(r)},!1,t.pYS)("keyup",function(r){return i.onKeyUp(r)},!1,t.pYS)("load",function(){return i.onLoad()},!1,t.evT)},decls:30,vars:1,consts:[[1,"container"],[1,"info"],[1,"teclas"],[1,"teclado"],[1,"tecla"],[1,"game"],["width","750","height","500",1,"canvas"],["game",""],["class","modal",4,"ngIf"],[1,"modal"],[1,"modal-content"],[1,"play",3,"click"]],template:function(e,i){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4),t._uU(5,"W"),t.qZA()(),t.TgZ(6,"div",3)(7,"div",4),t._uU(8,"A"),t.qZA(),t.TgZ(9,"div",4),t._uU(10,"S"),t.qZA(),t.TgZ(11,"div",4),t._uU(12,"D"),t.qZA()()()(),t.TgZ(13,"div",5)(14,"div"),t._UZ(15,"canvas",6,7),t.qZA(),t.YNc(17,w,12,0,"div",8),t.qZA(),t.TgZ(18,"div",1)(19,"div",2)(20,"div",3)(21,"div",4),t._uU(22,"\u2191"),t.qZA()(),t.TgZ(23,"div",3)(24,"div",4),t._uU(25,"\u2190"),t.qZA(),t.TgZ(26,"div",4),t._uU(27,"\u2193"),t.qZA(),t.TgZ(28,"div",4),t._uU(29,"\u2192"),t.qZA()()()()()),2&e&&(t.xp6(17),t.Q6J("ngIf",!i.play))},dependencies:[p.O5],styles:[".container[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;justify-content:center;background-color:#000}.info[_ngcontent-%COMP%]{width:100px;height:100%;display:flex;flex-direction:column}.teclado[_ngcontent-%COMP%]{display:flex;justify-content:center}.tecla[_ngcontent-%COMP%]{width:30px;height:30px;align-items:center;border:solid .5px;background-color:#fff}.canvas[_ngcontent-%COMP%]{border:solid;background-color:#fff}.modal[_ngcontent-%COMP%]{display:block;position:fixed;z-index:1;left:0;top:0;width:100%;height:100%;overflow:auto;background-color:#000;background-color:#0006}.modal-content[_ngcontent-%COMP%]{width:100%;height:100%;display:flex;align-items:center;flex-direction:column}.play[_ngcontent-%COMP%]{height:50px;width:150px;border:solid .5px;border-radius:5px;display:flex;align-items:center;justify-content:center}.play[_ngcontent-%COMP%]:hover{background-color:#00f;color:#fff}"]}),n})()}];let x=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[c.Bz.forChild(_),c.Bz]}),n})(),P=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[p.ez,x]}),n})()}}]);